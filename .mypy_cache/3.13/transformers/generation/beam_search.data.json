{".class":"MypyFile","_fullname":"transformers.generation.beam_search","future_import_flags":[],"is_partial_stub_package":false,"is_stub":false,"names":{".class":"SymbolTable","ABC":{".class":"SymbolTableNode","cross_ref":"abc.ABC","kind":"Gdef"},"BeamHypotheses":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"TypeInfo","_promote":[],"abstract_attributes":[],"alt_promote":null,"bases":["builtins.object"],"dataclass_transform_spec":null,"declared_metaclass":null,"defn":{".class":"ClassDef","fullname":"transformers.generation.beam_search.BeamHypotheses","name":"BeamHypotheses","type_vars":[]},"deletable_attributes":[],"deprecated":null,"flags":[],"fullname":"transformers.generation.beam_search.BeamHypotheses","has_param_spec_type":false,"metaclass_type":null,"metadata":{},"module_name":"transformers.generation.beam_search","mro":["transformers.generation.beam_search.BeamHypotheses","builtins.object"],"names":{".class":"SymbolTable","__init__":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,0,1],"arg_names":["self","num_beams","length_penalty","early_stopping","max_length"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.generation.beam_search.BeamHypotheses.__init__","name":"__init__","type":{".class":"CallableType","arg_kinds":[0,0,0,0,1],"arg_names":["self","num_beams","length_penalty","early_stopping","max_length"],"arg_types":["transformers.generation.beam_search.BeamHypotheses","builtins.int","builtins.float","builtins.bool",{".class":"UnionType","items":["builtins.int",{".class":"NoneType"}],"uses_pep604_syntax":false}],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"__init__ of BeamHypotheses","ret_type":{".class":"NoneType"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"__len__":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0],"arg_names":[null],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.generation.beam_search.BeamHypotheses.__len__","name":"__len__","type":null}},"add":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,1,1],"arg_names":["self","hyp","sum_logprobs","beam_indices","generated_len"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.generation.beam_search.BeamHypotheses.add","name":"add","type":{".class":"CallableType","arg_kinds":[0,0,0,1,1],"arg_names":["self","hyp","sum_logprobs","beam_indices","generated_len"],"arg_types":["transformers.generation.beam_search.BeamHypotheses","torch._C.LongTensor","builtins.float",{".class":"UnionType","items":["torch._C.LongTensor",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["builtins.int",{".class":"NoneType"}],"uses_pep604_syntax":false}],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"add of BeamHypotheses","ret_type":{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":1},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"beams":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred","invalid_partial_type"],"fullname":"transformers.generation.beam_search.BeamHypotheses.beams","name":"beams","type":{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":1}],"extra_attrs":null,"type_ref":"builtins.list"}}},"early_stopping":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"transformers.generation.beam_search.BeamHypotheses.early_stopping","name":"early_stopping","type":"builtins.bool"}},"is_done":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,1],"arg_names":["self","best_sum_logprobs","cur_len","decoder_prompt_len"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.generation.beam_search.BeamHypotheses.is_done","name":"is_done","type":{".class":"CallableType","arg_kinds":[0,0,0,1],"arg_names":["self","best_sum_logprobs","cur_len","decoder_prompt_len"],"arg_types":["transformers.generation.beam_search.BeamHypotheses","builtins.float","builtins.int",{".class":"UnionType","items":["builtins.int",{".class":"NoneType"}],"uses_pep604_syntax":false}],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"is_done of BeamHypotheses","ret_type":"builtins.bool","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"length_penalty":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"transformers.generation.beam_search.BeamHypotheses.length_penalty","name":"length_penalty","type":"builtins.float"}},"max_length":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"transformers.generation.beam_search.BeamHypotheses.max_length","name":"max_length","type":{".class":"UnionType","items":["builtins.int",{".class":"NoneType"}],"uses_pep604_syntax":false}}},"num_beams":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"transformers.generation.beam_search.BeamHypotheses.num_beams","name":"num_beams","type":"builtins.int"}},"worst_score":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"transformers.generation.beam_search.BeamHypotheses.worst_score","name":"worst_score","type":"builtins.float"}}},"self_type":{".class":"TypeVarType","default":{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":4},"fullname":"transformers.generation.beam_search.BeamHypotheses.Self","id":0,"name":"Self","namespace":"","upper_bound":"transformers.generation.beam_search.BeamHypotheses","values":[],"variance":0},"slots":null,"tuple_type":null,"type_vars":[],"typeddict_type":null}},"BeamScorer":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"TypeInfo","_promote":[],"abstract_attributes":[["finalize",1],["process",1]],"alt_promote":null,"bases":["abc.ABC"],"dataclass_transform_spec":null,"declared_metaclass":null,"defn":{".class":"ClassDef","fullname":"transformers.generation.beam_search.BeamScorer","name":"BeamScorer","type_vars":[]},"deletable_attributes":[],"deprecated":null,"flags":["is_abstract"],"fullname":"transformers.generation.beam_search.BeamScorer","has_param_spec_type":false,"metaclass_type":"abc.ABCMeta","metadata":{},"module_name":"transformers.generation.beam_search","mro":["transformers.generation.beam_search.BeamScorer","abc.ABC","builtins.object"],"names":{".class":"SymbolTable","finalize":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"Decorator","func":{".class":"FuncDef","abstract_status":1,"arg_kinds":[0,0,0,0,0,0,4],"arg_names":["self","input_ids","next_scores","next_tokens","next_indices","max_length","kwargs"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_decorated","is_trivial_body"],"fullname":"transformers.generation.beam_search.BeamScorer.finalize","name":"finalize","type":{".class":"CallableType","arg_kinds":[0,0,0,0,0,0,4],"arg_names":["self","input_ids","next_scores","next_tokens","next_indices","max_length","kwargs"],"arg_types":["transformers.generation.beam_search.BeamScorer","torch._C.LongTensor","torch._C.FloatTensor","torch._C.LongTensor","torch._C.LongTensor","builtins.int",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":1}],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"finalize of BeamScorer","ret_type":"torch._C.LongTensor","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}},"is_overload":false,"var":{".class":"Var","flags":["is_initialized_in_class","is_ready","is_inferred"],"fullname":"transformers.generation.beam_search.BeamScorer.finalize","name":"finalize","type":{".class":"AnyType","missing_import_name":null,"source_any":{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":1},"type_of_any":7}}}},"process":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"Decorator","func":{".class":"FuncDef","abstract_status":1,"arg_kinds":[0,0,0,0,0,4],"arg_names":["self","input_ids","next_scores","next_tokens","next_indices","kwargs"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_decorated","is_trivial_body"],"fullname":"transformers.generation.beam_search.BeamScorer.process","name":"process","type":{".class":"CallableType","arg_kinds":[0,0,0,0,0,4],"arg_names":["self","input_ids","next_scores","next_tokens","next_indices","kwargs"],"arg_types":["transformers.generation.beam_search.BeamScorer","torch._C.LongTensor","torch._C.FloatTensor","torch._C.LongTensor","torch._C.LongTensor",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":1}],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"process of BeamScorer","ret_type":{".class":"TupleType","implicit":false,"items":["torch._tensor.Tensor"],"partial_fallback":{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6}],"extra_attrs":null,"type_ref":"builtins.tuple"}},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}},"is_overload":false,"var":{".class":"Var","flags":["is_initialized_in_class","is_ready","is_inferred"],"fullname":"transformers.generation.beam_search.BeamScorer.process","name":"process","type":{".class":"AnyType","missing_import_name":null,"source_any":{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":1},"type_of_any":7}}}}},"self_type":{".class":"TypeVarType","default":{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":4},"fullname":"transformers.generation.beam_search.BeamScorer.Self","id":0,"name":"Self","namespace":"","upper_bound":"transformers.generation.beam_search.BeamScorer","values":[],"variance":0},"slots":null,"tuple_type":null,"type_vars":[],"typeddict_type":null}},"BeamSearchScorer":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"TypeInfo","_promote":[],"abstract_attributes":[],"alt_promote":null,"bases":["transformers.generation.beam_search.BeamScorer"],"dataclass_transform_spec":null,"declared_metaclass":null,"defn":{".class":"ClassDef","fullname":"transformers.generation.beam_search.BeamSearchScorer","name":"BeamSearchScorer","type_vars":[]},"deletable_attributes":[],"deprecated":null,"flags":[],"fullname":"transformers.generation.beam_search.BeamSearchScorer","has_param_spec_type":false,"metaclass_type":"abc.ABCMeta","metadata":{},"module_name":"transformers.generation.beam_search","mro":["transformers.generation.beam_search.BeamSearchScorer","transformers.generation.beam_search.BeamScorer","abc.ABC","builtins.object"],"names":{".class":"SymbolTable","__init__":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,0,1,1,1,1,1],"arg_names":["self","batch_size","num_beams","device","length_penalty","do_early_stopping","num_beam_hyps_to_keep","num_beam_groups","max_length"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.generation.beam_search.BeamSearchScorer.__init__","name":"__init__","type":{".class":"CallableType","arg_kinds":[0,0,0,0,1,1,1,1,1],"arg_names":["self","batch_size","num_beams","device","length_penalty","do_early_stopping","num_beam_hyps_to_keep","num_beam_groups","max_length"],"arg_types":["transformers.generation.beam_search.BeamSearchScorer","builtins.int","builtins.int","torch._C.device",{".class":"UnionType","items":["builtins.float",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["builtins.bool","builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["builtins.int",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["builtins.int",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["builtins.int",{".class":"NoneType"}],"uses_pep604_syntax":false}],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"__init__ of BeamSearchScorer","ret_type":{".class":"NoneType"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_beam_hyps":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"transformers.generation.beam_search.BeamSearchScorer._beam_hyps","name":"_beam_hyps","type":{".class":"Instance","args":["transformers.generation.beam_search.BeamHypotheses"],"extra_attrs":null,"type_ref":"builtins.list"}}},"_done":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"transformers.generation.beam_search.BeamSearchScorer._done","name":"_done","type":"torch._tensor.Tensor"}},"_is_init":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"transformers.generation.beam_search.BeamSearchScorer._is_init","name":"_is_init","type":"builtins.bool"}},"device":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"transformers.generation.beam_search.BeamSearchScorer.device","name":"device","type":"torch._C.device"}},"do_early_stopping":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"transformers.generation.beam_search.BeamSearchScorer.do_early_stopping","name":"do_early_stopping","type":{".class":"UnionType","items":["builtins.bool","builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":false}}},"finalize":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,0,0,0,1,1,1,1],"arg_names":["self","input_ids","final_beam_scores","final_beam_tokens","final_beam_indices","max_length","pad_token_id","eos_token_id","beam_indices","decoder_prompt_len"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.generation.beam_search.BeamSearchScorer.finalize","name":"finalize","type":{".class":"CallableType","arg_kinds":[0,0,0,0,0,0,1,1,1,1],"arg_names":["self","input_ids","final_beam_scores","final_beam_tokens","final_beam_indices","max_length","pad_token_id","eos_token_id","beam_indices","decoder_prompt_len"],"arg_types":["transformers.generation.beam_search.BeamSearchScorer","torch._C.LongTensor","torch._C.FloatTensor","torch._C.LongTensor","torch._C.LongTensor","builtins.int",{".class":"UnionType","items":["builtins.int","torch._tensor.Tensor",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["builtins.int",{".class":"Instance","args":["builtins.int"],"extra_attrs":null,"type_ref":"builtins.list"},"torch._tensor.Tensor",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["torch._C.LongTensor",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["builtins.int",{".class":"NoneType"}],"uses_pep604_syntax":false}],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"finalize of BeamSearchScorer","ret_type":{".class":"TupleType","implicit":false,"items":["torch._C.LongTensor"],"partial_fallback":{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6}],"extra_attrs":null,"type_ref":"builtins.tuple"}},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"group_size":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"transformers.generation.beam_search.BeamSearchScorer.group_size","name":"group_size","type":"builtins.int"}},"is_done":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"Decorator","func":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0],"arg_names":["self"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_property","is_decorated"],"fullname":"transformers.generation.beam_search.BeamSearchScorer.is_done","name":"is_done","type":{".class":"CallableType","arg_kinds":[0],"arg_names":["self"],"arg_types":["transformers.generation.beam_search.BeamSearchScorer"],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"is_done of BeamSearchScorer","ret_type":"builtins.bool","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}},"is_overload":false,"var":{".class":"Var","flags":["is_initialized_in_class","is_property","is_ready","is_inferred"],"fullname":"transformers.generation.beam_search.BeamSearchScorer.is_done","name":"is_done","type":{".class":"CallableType","arg_kinds":[0],"arg_names":["self"],"arg_types":["transformers.generation.beam_search.BeamSearchScorer"],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"is_done of BeamSearchScorer","ret_type":"builtins.bool","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}}},"length_penalty":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"transformers.generation.beam_search.BeamSearchScorer.length_penalty","name":"length_penalty","type":{".class":"UnionType","items":["builtins.float",{".class":"NoneType"}],"uses_pep604_syntax":false}}},"num_beam_groups":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"transformers.generation.beam_search.BeamSearchScorer.num_beam_groups","name":"num_beam_groups","type":{".class":"UnionType","items":["builtins.int",{".class":"NoneType"}],"uses_pep604_syntax":false}}},"num_beam_hyps_to_keep":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"transformers.generation.beam_search.BeamSearchScorer.num_beam_hyps_to_keep","name":"num_beam_hyps_to_keep","type":{".class":"UnionType","items":["builtins.int",{".class":"NoneType"}],"uses_pep604_syntax":false}}},"num_beams":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"transformers.generation.beam_search.BeamSearchScorer.num_beams","name":"num_beams","type":"builtins.int"}},"process":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,0,0,1,1,1,1,1],"arg_names":["self","input_ids","next_scores","next_tokens","next_indices","pad_token_id","eos_token_id","beam_indices","group_index","decoder_prompt_len"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.generation.beam_search.BeamSearchScorer.process","name":"process","type":{".class":"CallableType","arg_kinds":[0,0,0,0,0,1,1,1,1,1],"arg_names":["self","input_ids","next_scores","next_tokens","next_indices","pad_token_id","eos_token_id","beam_indices","group_index","decoder_prompt_len"],"arg_types":["transformers.generation.beam_search.BeamSearchScorer","torch._C.LongTensor","torch._C.FloatTensor","torch._C.LongTensor","torch._C.LongTensor",{".class":"UnionType","items":["builtins.int","torch._tensor.Tensor",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["builtins.int",{".class":"Instance","args":["builtins.int"],"extra_attrs":null,"type_ref":"builtins.list"},"torch._tensor.Tensor",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["torch._C.LongTensor",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["builtins.int",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["builtins.int",{".class":"NoneType"}],"uses_pep604_syntax":false}],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"process of BeamSearchScorer","ret_type":{".class":"Instance","args":["builtins.str","torch._tensor.Tensor"],"extra_attrs":null,"type_ref":"builtins.dict"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}}},"self_type":{".class":"TypeVarType","default":{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":4},"fullname":"transformers.generation.beam_search.BeamSearchScorer.Self","id":0,"name":"Self","namespace":"","upper_bound":"transformers.generation.beam_search.BeamSearchScorer","values":[],"variance":0},"slots":null,"tuple_type":null,"type_vars":[],"typeddict_type":null}},"ConstrainedBeamSearchScorer":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"TypeInfo","_promote":[],"abstract_attributes":[],"alt_promote":null,"bases":["transformers.generation.beam_search.BeamScorer"],"dataclass_transform_spec":null,"declared_metaclass":null,"defn":{".class":"ClassDef","fullname":"transformers.generation.beam_search.ConstrainedBeamSearchScorer","name":"ConstrainedBeamSearchScorer","type_vars":[]},"deletable_attributes":[],"deprecated":null,"flags":[],"fullname":"transformers.generation.beam_search.ConstrainedBeamSearchScorer","has_param_spec_type":false,"metaclass_type":"abc.ABCMeta","metadata":{},"module_name":"transformers.generation.beam_search","mro":["transformers.generation.beam_search.ConstrainedBeamSearchScorer","transformers.generation.beam_search.BeamScorer","abc.ABC","builtins.object"],"names":{".class":"SymbolTable","__init__":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,0,0,1,1,1,1,1],"arg_names":["self","batch_size","num_beams","constraints","device","length_penalty","do_early_stopping","num_beam_hyps_to_keep","num_beam_groups","max_length"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.generation.beam_search.ConstrainedBeamSearchScorer.__init__","name":"__init__","type":{".class":"CallableType","arg_kinds":[0,0,0,0,0,1,1,1,1,1],"arg_names":["self","batch_size","num_beams","constraints","device","length_penalty","do_early_stopping","num_beam_hyps_to_keep","num_beam_groups","max_length"],"arg_types":["transformers.generation.beam_search.ConstrainedBeamSearchScorer","builtins.int","builtins.int",{".class":"Instance","args":["transformers.generation.beam_constraints.Constraint"],"extra_attrs":null,"type_ref":"builtins.list"},"torch._C.device",{".class":"UnionType","items":["builtins.float",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["builtins.bool","builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["builtins.int",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["builtins.int",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["builtins.int",{".class":"NoneType"}],"uses_pep604_syntax":false}],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"__init__ of ConstrainedBeamSearchScorer","ret_type":{".class":"NoneType"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_beam_hyps":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"transformers.generation.beam_search.ConstrainedBeamSearchScorer._beam_hyps","name":"_beam_hyps","type":{".class":"Instance","args":["transformers.generation.beam_search.BeamHypotheses"],"extra_attrs":null,"type_ref":"builtins.list"}}},"_done":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"transformers.generation.beam_search.ConstrainedBeamSearchScorer._done","name":"_done","type":"torch._tensor.Tensor"}},"_is_init":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"transformers.generation.beam_search.ConstrainedBeamSearchScorer._is_init","name":"_is_init","type":"builtins.bool"}},"check_completes_constraints":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0],"arg_names":["self","sequence"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.generation.beam_search.ConstrainedBeamSearchScorer.check_completes_constraints","name":"check_completes_constraints","type":null}},"constraints":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"transformers.generation.beam_search.ConstrainedBeamSearchScorer.constraints","name":"constraints","type":{".class":"Instance","args":["transformers.generation.beam_constraints.Constraint"],"extra_attrs":null,"type_ref":"builtins.list"}}},"device":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"transformers.generation.beam_search.ConstrainedBeamSearchScorer.device","name":"device","type":"torch._C.device"}},"do_early_stopping":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"transformers.generation.beam_search.ConstrainedBeamSearchScorer.do_early_stopping","name":"do_early_stopping","type":{".class":"UnionType","items":["builtins.bool","builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":false}}},"finalize":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,0,0,0,1,1,1,1],"arg_names":["self","input_ids","final_beam_scores","final_beam_tokens","final_beam_indices","max_length","pad_token_id","eos_token_id","beam_indices","decoder_prompt_len"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.generation.beam_search.ConstrainedBeamSearchScorer.finalize","name":"finalize","type":{".class":"CallableType","arg_kinds":[0,0,0,0,0,0,1,1,1,1],"arg_names":["self","input_ids","final_beam_scores","final_beam_tokens","final_beam_indices","max_length","pad_token_id","eos_token_id","beam_indices","decoder_prompt_len"],"arg_types":["transformers.generation.beam_search.ConstrainedBeamSearchScorer","torch._C.LongTensor","torch._C.FloatTensor","torch._C.LongTensor","torch._C.LongTensor","builtins.int",{".class":"UnionType","items":["builtins.int","torch._tensor.Tensor",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["builtins.int",{".class":"Instance","args":["builtins.int"],"extra_attrs":null,"type_ref":"builtins.list"},"torch._tensor.Tensor",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["torch._C.LongTensor",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["builtins.int",{".class":"NoneType"}],"uses_pep604_syntax":false}],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"finalize of ConstrainedBeamSearchScorer","ret_type":{".class":"TupleType","implicit":false,"items":["torch._C.LongTensor"],"partial_fallback":{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6}],"extra_attrs":null,"type_ref":"builtins.tuple"}},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"group_size":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"transformers.generation.beam_search.ConstrainedBeamSearchScorer.group_size","name":"group_size","type":"builtins.int"}},"is_done":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"Decorator","func":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0],"arg_names":["self"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_property","is_decorated"],"fullname":"transformers.generation.beam_search.ConstrainedBeamSearchScorer.is_done","name":"is_done","type":{".class":"CallableType","arg_kinds":[0],"arg_names":["self"],"arg_types":["transformers.generation.beam_search.ConstrainedBeamSearchScorer"],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"is_done of ConstrainedBeamSearchScorer","ret_type":"builtins.bool","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}},"is_overload":false,"var":{".class":"Var","flags":["is_initialized_in_class","is_property","is_ready","is_inferred"],"fullname":"transformers.generation.beam_search.ConstrainedBeamSearchScorer.is_done","name":"is_done","type":{".class":"CallableType","arg_kinds":[0],"arg_names":["self"],"arg_types":["transformers.generation.beam_search.ConstrainedBeamSearchScorer"],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"is_done of ConstrainedBeamSearchScorer","ret_type":"builtins.bool","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}}},"length_penalty":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"transformers.generation.beam_search.ConstrainedBeamSearchScorer.length_penalty","name":"length_penalty","type":{".class":"UnionType","items":["builtins.float",{".class":"NoneType"}],"uses_pep604_syntax":false}}},"make_constraint_states":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0],"arg_names":["self","n"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.generation.beam_search.ConstrainedBeamSearchScorer.make_constraint_states","name":"make_constraint_states","type":null}},"num_beam_groups":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"transformers.generation.beam_search.ConstrainedBeamSearchScorer.num_beam_groups","name":"num_beam_groups","type":{".class":"UnionType","items":["builtins.int",{".class":"NoneType"}],"uses_pep604_syntax":false}}},"num_beam_hyps_to_keep":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"transformers.generation.beam_search.ConstrainedBeamSearchScorer.num_beam_hyps_to_keep","name":"num_beam_hyps_to_keep","type":{".class":"UnionType","items":["builtins.int",{".class":"NoneType"}],"uses_pep604_syntax":false}}},"num_beams":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"transformers.generation.beam_search.ConstrainedBeamSearchScorer.num_beams","name":"num_beams","type":"builtins.int"}},"process":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,0,0,0,1,1,1,1],"arg_names":["self","input_ids","next_scores","next_tokens","next_indices","scores_for_all_vocab","pad_token_id","eos_token_id","beam_indices","decoder_prompt_len"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.generation.beam_search.ConstrainedBeamSearchScorer.process","name":"process","type":{".class":"CallableType","arg_kinds":[0,0,0,0,0,0,1,1,1,1],"arg_names":["self","input_ids","next_scores","next_tokens","next_indices","scores_for_all_vocab","pad_token_id","eos_token_id","beam_indices","decoder_prompt_len"],"arg_types":["transformers.generation.beam_search.ConstrainedBeamSearchScorer","torch._C.LongTensor","torch._C.FloatTensor","torch._C.LongTensor","torch._C.LongTensor","torch._C.FloatTensor",{".class":"UnionType","items":["builtins.int","torch._tensor.Tensor",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["builtins.int",{".class":"Instance","args":["builtins.int"],"extra_attrs":null,"type_ref":"builtins.list"},"torch._tensor.Tensor",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["torch._C.LongTensor",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["builtins.int",{".class":"NoneType"}],"uses_pep604_syntax":false}],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"process of ConstrainedBeamSearchScorer","ret_type":{".class":"TupleType","implicit":false,"items":["torch._tensor.Tensor"],"partial_fallback":{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6}],"extra_attrs":null,"type_ref":"builtins.tuple"}},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"step_sentence_constraint":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,0,0,0,0,1],"arg_names":["self","batch_idx","input_ids","vocab_scores","sent_beam_scores","sent_beam_tokens","sent_beam_indices","push_progress"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.generation.beam_search.ConstrainedBeamSearchScorer.step_sentence_constraint","name":"step_sentence_constraint","type":{".class":"CallableType","arg_kinds":[0,0,0,0,0,0,0,1],"arg_names":["self","batch_idx","input_ids","vocab_scores","sent_beam_scores","sent_beam_tokens","sent_beam_indices","push_progress"],"arg_types":["transformers.generation.beam_search.ConstrainedBeamSearchScorer","builtins.int","torch._C.LongTensor","torch._C.FloatTensor","torch._C.FloatTensor","torch._C.LongTensor","torch._C.LongTensor","builtins.bool"],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"step_sentence_constraint of ConstrainedBeamSearchScorer","ret_type":{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":1},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}}},"self_type":{".class":"TypeVarType","default":{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":4},"fullname":"transformers.generation.beam_search.ConstrainedBeamSearchScorer.Self","id":0,"name":"Self","namespace":"","upper_bound":"transformers.generation.beam_search.ConstrainedBeamSearchScorer","values":[],"variance":0},"slots":null,"tuple_type":null,"type_vars":[],"typeddict_type":null}},"Constraint":{".class":"SymbolTableNode","cross_ref":"transformers.generation.beam_constraints.Constraint","kind":"Gdef"},"ConstraintListState":{".class":"SymbolTableNode","cross_ref":"transformers.generation.beam_constraints.ConstraintListState","kind":"Gdef"},"FINALIZE_INPUTS_DOCSTRING":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready","is_inferred","has_explicit_value"],"fullname":"transformers.generation.beam_search.FINALIZE_INPUTS_DOCSTRING","name":"FINALIZE_INPUTS_DOCSTRING","type":"builtins.str"}},"Optional":{".class":"SymbolTableNode","cross_ref":"typing.Optional","kind":"Gdef"},"PROCESS_INPUTS_DOCSTRING":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready","is_inferred","has_explicit_value"],"fullname":"transformers.generation.beam_search.PROCESS_INPUTS_DOCSTRING","name":"PROCESS_INPUTS_DOCSTRING","type":"builtins.str"}},"Union":{".class":"SymbolTableNode","cross_ref":"typing.Union","kind":"Gdef"},"UserDict":{".class":"SymbolTableNode","cross_ref":"collections.UserDict","kind":"Gdef"},"__annotations__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"transformers.generation.beam_search.__annotations__","name":"__annotations__","type":{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6}],"extra_attrs":null,"type_ref":"builtins.dict"}}},"__doc__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"transformers.generation.beam_search.__doc__","name":"__doc__","type":"builtins.str"}},"__file__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"transformers.generation.beam_search.__file__","name":"__file__","type":"builtins.str"}},"__name__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"transformers.generation.beam_search.__name__","name":"__name__","type":"builtins.str"}},"__package__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"transformers.generation.beam_search.__package__","name":"__package__","type":"builtins.str"}},"__spec__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"transformers.generation.beam_search.__spec__","name":"__spec__","type":"_frozen_importlib.ModuleSpec"}},"abstractmethod":{".class":"SymbolTableNode","cross_ref":"abc.abstractmethod","kind":"Gdef"},"add_start_docstrings":{".class":"SymbolTableNode","cross_ref":"transformers.utils.doc.add_start_docstrings","kind":"Gdef"},"np":{".class":"SymbolTableNode","cross_ref":"numpy","kind":"Gdef"},"torch":{".class":"SymbolTableNode","cross_ref":"torch","kind":"Gdef"}},"path":"/Users/hz/Projects/python/nsfw/.venv/lib/python3.13/site-packages/transformers/generation/beam_search.py"}